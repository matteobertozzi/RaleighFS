/* File autogenerated, do not edit */

#include <zcl/string.h>
#include "rpc.h"

int rpc_reqhead_parse (struct rpc_reqhead *msg, void *reader) {
    uint16_t field_id;
    uint64_t length;
    z_memzero(msg->reqhead_fields_bitmap, 1);
    while (z_reader_decode_field(reader, &field_id, &length) > 0) {
        switch (field_id) {
            case 0: /* uint64 req_id */
                /* TODO: Check if the size is allowed by the type */
                if (z_reader_decode_uint64(reader, length, &(msg->req_id)))
                    return(-1);
                z_bit_set(msg->reqhead_fields_bitmap, 0);
                break;
            case 1: /* uint64 req_type */
                /* TODO: Check if the size is allowed by the type */
                if (z_reader_decode_uint64(reader, length, &(msg->req_type)))
                    return(-1);
                z_bit_set(msg->reqhead_fields_bitmap, 1);
                break;
            default:
                if (z_reader_skip(reader, length))
                    return(-1);
                break;
        }
    }
    return(0);
}

static uint8_t *__rpc_write_uint64 (uint8_t *buf, uint16_t field_id, uint64_t value) {
    unsigned length = z_uint64_bytes(value);
    int elen = z_encode_field(buf, field_id, length); buf += elen;
    z_encode_uint64(buf, length, value); buf += length;
    return(buf);
}


uint8_t *rpc_reqhead_write_req_id (uint8_t *buf, uint64_t value) {
    return(__rpc_write_uint64(buf, 0, value));
}

uint8_t *rpc_reqhead_write_req_type (uint8_t *buf, uint64_t value) {
    return(__rpc_write_uint64(buf, 1, value));
}


#define __rpc_dump_uint64(stream, field)    fprintf(stream, "%lu", field)

void rpc_reqhead_dump (FILE *stream, const struct rpc_reqhead *msg) {
    fprintf(stream, "rpc_reqhead {");
    fprintf(stream, "\n    0: uint64 req_id = ");
    if (rpc_reqhead_has_req_id(msg)) {
        __rpc_dump_uint64(stream, msg->req_id);
    } else {
        fprintf(stream, "MISSING");
    }
    fprintf(stream, "\n    1: uint64 req_type = ");
    if (rpc_reqhead_has_req_type(msg)) {
        __rpc_dump_uint64(stream, msg->req_type);
    } else {
        fprintf(stream, "MISSING");
    }
    fprintf(stream, "\n}\n");
}

